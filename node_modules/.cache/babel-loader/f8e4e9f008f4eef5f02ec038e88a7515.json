{"ast":null,"code":"import _objectSpread from\"/home/piruprohacking/Escritorio/SCRUM MASTER JUVENTIC/RestauranteJuventic-React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{authHeader}from'../_helpers';export var userService={login:login,logout:logout,register:register,getAll:getAll,getById:getById,update:update,delete:_delete};function login(username,password){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})};return fetch(\"/users/authenticate\",requestOptions).then(handleResponse).then(function(user){// store user details and jwt token in local storage to keep user logged in between page refreshes\nlocalStorage.setItem('user',JSON.stringify(user));return user;});}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem('user');}function getAll(){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"/users\",requestOptions).then(handleResponse);}function getById(id){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"/users/\".concat(id),requestOptions).then(handleResponse);}function register(user){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)};return fetch(\"/users/register\",requestOptions).then(handleResponse);}function update(user){var requestOptions={method:'PUT',headers:_objectSpread(_objectSpread({},authHeader()),{},{'Content-Type':'application/json'}),body:JSON.stringify(user)};return fetch(\"/users/\".concat(user.id),requestOptions).then(handleResponse);;}// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id){var requestOptions={method:'DELETE',headers:authHeader()};return fetch(\"/users/\".concat(id),requestOptions).then(handleResponse);}function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){if(response.status===401){// auto logout if 401 response returned from api\nlogout();location.reload(true);}var error=data&&data.message||response.statusText;return Promise.reject(error);}return data;});}","map":{"version":3,"sources":["/home/piruprohacking/Escritorio/SCRUM MASTER JUVENTIC/RestauranteJuventic-React/src/administrar/_services/user.service.js"],"names":["authHeader","userService","login","logout","register","getAll","getById","update","delete","_delete","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","user","localStorage","setItem","removeItem","id","response","text","data","parse","ok","status","location","reload","error","message","statusText","Promise","reject"],"mappings":"qMAAA,OAASA,UAAT,KAA2B,aAA3B,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,CACvBC,KAAK,CAALA,KADuB,CAEvBC,MAAM,CAANA,MAFuB,CAGvBC,QAAQ,CAARA,QAHuB,CAIvBC,MAAM,CAANA,MAJuB,CAKvBC,OAAO,CAAPA,OALuB,CAMvBC,MAAM,CAANA,MANuB,CAOvBC,MAAM,CAAEC,OAPe,CAApB,CAUP,QAASP,CAAAA,KAAT,CAAeQ,QAAf,CAAyBC,QAAzB,CAAmC,CAC/B,GAAMC,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFU,CAGnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEP,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAf,CAHa,CAAvB,CAMA,MAAOO,CAAAA,KAAK,uBAAwBN,cAAxB,CAAL,CACFO,IADE,CACGC,cADH,EAEFD,IAFE,CAEG,SAAAE,IAAI,CAAI,CACV;AACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BP,IAAI,CAACC,SAAL,CAAeI,IAAf,CAA7B,EAEA,MAAOA,CAAAA,IAAP,CACH,CAPE,CAAP,CAQH,CAED,QAASlB,CAAAA,MAAT,EAAkB,CACd;AACAmB,YAAY,CAACE,UAAb,CAAwB,MAAxB,EACH,CAED,QAASnB,CAAAA,MAAT,EAAkB,CACd,GAAMO,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,KADW,CAEnBC,OAAO,CAAEd,UAAU,EAFA,CAAvB,CAKA,MAAOkB,CAAAA,KAAK,UAAWN,cAAX,CAAL,CAAgCO,IAAhC,CAAqCC,cAArC,CAAP,CACH,CAED,QAASd,CAAAA,OAAT,CAAiBmB,EAAjB,CAAqB,CACjB,GAAMb,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,KADW,CAEnBC,OAAO,CAAEd,UAAU,EAFA,CAAvB,CAKA,MAAOkB,CAAAA,KAAK,kBAAWO,EAAX,EAAiBb,cAAjB,CAAL,CAAsCO,IAAtC,CAA2CC,cAA3C,CAAP,CACH,CAED,QAAShB,CAAAA,QAAT,CAAkBiB,IAAlB,CAAwB,CACpB,GAAMT,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFU,CAGnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeI,IAAf,CAHa,CAAvB,CAMA,MAAOH,CAAAA,KAAK,mBAAoBN,cAApB,CAAL,CAAyCO,IAAzC,CAA8CC,cAA9C,CAAP,CACH,CAED,QAASb,CAAAA,MAAT,CAAgBc,IAAhB,CAAsB,CAClB,GAAMT,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,KADW,CAEnBC,OAAO,gCAAOd,UAAU,EAAjB,MAAqB,eAAgB,kBAArC,EAFY,CAGnBe,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeI,IAAf,CAHa,CAAvB,CAMA,MAAOH,CAAAA,KAAK,kBAAWG,IAAI,CAACI,EAAhB,EAAsBb,cAAtB,CAAL,CAA2CO,IAA3C,CAAgDC,cAAhD,CAAP,CAAuE,CAC1E,CAED;AACA,QAASX,CAAAA,OAAT,CAAiBgB,EAAjB,CAAqB,CACjB,GAAMb,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAE,QADW,CAEnBC,OAAO,CAAEd,UAAU,EAFA,CAAvB,CAKA,MAAOkB,CAAAA,KAAK,kBAAWO,EAAX,EAAiBb,cAAjB,CAAL,CAAsCO,IAAtC,CAA2CC,cAA3C,CAAP,CACH,CAED,QAASA,CAAAA,cAAT,CAAwBM,QAAxB,CAAkC,CAC9B,MAAOA,CAAAA,QAAQ,CAACC,IAAT,GAAgBR,IAAhB,CAAqB,SAAAQ,IAAI,CAAI,CAChC,GAAMC,CAAAA,IAAI,CAAGD,IAAI,EAAIX,IAAI,CAACa,KAAL,CAAWF,IAAX,CAArB,CACA,GAAI,CAACD,QAAQ,CAACI,EAAd,CAAkB,CACd,GAAIJ,QAAQ,CAACK,MAAT,GAAoB,GAAxB,CAA6B,CACzB;AACA5B,MAAM,GACN6B,QAAQ,CAACC,MAAT,CAAgB,IAAhB,EACH,CAED,GAAMC,CAAAA,KAAK,CAAIN,IAAI,EAAIA,IAAI,CAACO,OAAd,EAA0BT,QAAQ,CAACU,UAAjD,CACA,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP,CACH,CAED,MAAON,CAAAA,IAAP,CACH,CAdM,CAAP,CAeH","sourcesContent":["import { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    register,\n    getAll,\n    getById,\n    update,\n    delete: _delete\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/users/authenticate`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\n            localStorage.setItem('user', JSON.stringify(user));\n\n            return user;\n        });\n}\n\nfunction logout() {\n    // remove user from local storage to log user out\n    localStorage.removeItem('user');\n}\n\nfunction getAll() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction getById(id) {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n\n    return fetch(`/users/register`, requestOptions).then(handleResponse);\n}\n\nfunction update(user) {\n    const requestOptions = {\n        method: 'PUT',\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n\n    return fetch(`/users/${user.id}`, requestOptions).then(handleResponse);;\n}\n\n// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id) {\n    const requestOptions = {\n        method: 'DELETE',\n        headers: authHeader()\n    };\n\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                // auto logout if 401 response returned from api\n                logout();\n                location.reload(true);\n            }\n\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n\n        return data;\n    });\n}"]},"metadata":{},"sourceType":"module"}